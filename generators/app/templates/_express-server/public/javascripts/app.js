'use strict';var socket = io.connect("/api/newsshsession", {query: "apikey=abc"});console.log("Connection Request Sent.");var authorized = false;var reconnecting = false;var reconnected = false;socket.on('authorization', function (data) {    if (data.status) {        console.log("Authorized.");        authorized = true;        reconnecting = false;        operate();    } else {        console.log("Error Authorizing");    }});socket.on('connect_failed', function () {    console.log("connection failed");});socket.on('reconnect', function (err) {    console.log("Reconnected");    reconnecting = false;    reconnected = true;});socket.on('reconnecting', function (err) {    console.log("Reconnecting");    reconnecting = true;    reconnected = true;});socket.on('response', function (data) {    console.log(data.abc);});function operate() {    if (reconnected && authorized) {        /*socket.emit('exec', { cmd: "ls" });         socket.on('execoutput', function (data) {         console.log(data);         })*/    }    else if (authorized) {        socket.emit('loginremote', {username: "dhyey", password: "4627", hostaddress: "127.0.0.1"});        socket.on('loginremote', function (login) {            if (login.status) {                console.log("Loggedin to remote.");                $("#sendBtn").show();                socket.emit('exec', {cmd: "ls"});                socket.on('execoutput', function (data) {                    console.log("Output: \n" + data.out);                    $("#output").append(`<p>${data.out}</p>`);                });                /*socket.emit('selectmodule', { modulename: "terminal" });                 socket.on('moduleselected', function (data) {                 if (data.status) {                 console.log("Selected Module: " + data.modulename);                 } else {                 console.log("Could not select module.");                 }                 });*/            }            else {                console.log("Wrong Password.");            }        })    }}function sendInput() {    let input = $("#input").val();    console.log("input: " + input);    socket.emit('exec', {cmd: input});}